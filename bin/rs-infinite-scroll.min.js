var RsInfiniteScroll=function(n){function o(e){if(t[e])return t[e].exports;var r=t[e]={exports:{},id:e,loaded:!1};return n[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}var t={};return o.m=n,o.c=t,o.p="",o(0)}([function(n,o,t){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(o,"__esModule",{value:!0});var r=t(1),i=e(r),l="rsInfiniteScroll",c=i["default"].module(l,[]);c.directive("rsInfiniteScroll",["$q","$timeout",function(n,o){return{restrict:"A",transclude:!0,template:"<div ng-transclude></div>",scope:{proxy:"="},controller:["$scope","$element",function(t,e){function r(){var n=1,t=-1,r=s(),f=r.containerHeight,H=r.contentHeight;e.on("scroll",function(){var e=v>-1;e&&!g&&(g=!0,c()),o.cancel(p);var r=s(),f=r.containerHeight,a=r.contentHeight,H=r.scrollPos,x=H>v?n:t;x===n&&H>=.9*(a-f)&&0==h&&i(),x===t&&.1*f>=H&&0==h&&l(),v=H,p=o(function(){d(),g&&(u(),g=!1)},300)}),f>H&&i().then(function(){o(function(){a(1),d()})})}function i(){if(t.proxy.loadFollowing){var e=n.defer();return h=1,o(function(){t.proxy.loadFollowing().then(function(){h=0,e.resolve()})}),e.promise}}function l(){if(t.proxy.loadPrevious){var r=n.defer(),i=e.find("div").prop("offsetHeight");return h=1,o(function(){t.proxy.loadPrevious().then(function(){o(function(){var n=e.find("div").prop("offsetHeight");a(n-i),h=0,r.resolve()})})}),r.promise}}function c(){if(t.proxy.onScrollStartHandler){for(var n=s(),o=n.scrollPos,e=[],r=0,i=H.length;i>r;r++){var l=H[r];l.isVisible&&e.push(l)}t.proxy.onScrollStartHandler({scrollPosition:o,childrenShowing:e})}}function u(){if(t.proxy.onScrollEndHandler){for(var n=s(),o=n.scrollPos,e=[],r=0,i=H.length;i>r;r++){var l=H[r];l.isVisible&&e.push(l)}t.proxy.onScrollEndHandler({scrollPosition:o,childrenShowing:e})}}function s(){var n=e.prop("offsetHeight"),o=e.find("div").prop("offsetHeight"),t=e[0].scrollTop;return{containerHeight:n,contentHeight:o,scrollPos:t}}function f(){return e[0].getBoundingClientRect()}function a(){var n=arguments.length<=0||void 0===arguments[0]?0:arguments[0];e[0].scrollTop=n}function d(){for(var n=f(),o=n.top,t=n.bottom,e=o,r=t,i=0,l=H.length;l>i;i++){var c=H[i],u=c.getBoundingBox(),s=u.top,a=u.bottom,d=a>=e&&r>=a||r>=s&&s>=e;c.isVisible=d}}var p,g=!1,v=-1,h=0,H=[];e.ready(r),t.$on("$destroy",function(){e.off("scroll")}),t.$watch(function(){return e[0].innerHTML.length},function(n,o){if(n!==o){var t=s(),e=t.containerHeight,r=t.contentHeight;e>=r&&d()}}),this.addChild=function(n){var o=s(),t=o.containerHeight,e=o.contentHeight,r=o.scrollPos;H.push(n),e>t&&0===r&&a(1)}}]}}]),c.directive("rsInfiniteScrollItem",function(){return{require:"^rsInfiniteScroll",restrict:"A",scope:{isVisible:"=",itemData:"="},link:function(n,o,t,e){e.addChild(n),n.getBoundingBox=function(){return o[0].getBoundingClientRect()}}}}),o["default"]=l,n.exports=o["default"]},function(n,o){n.exports=angular}]);