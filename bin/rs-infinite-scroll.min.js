var RsInfiniteScroll=function(n){function t(e){if(o[e])return o[e].exports;var r=o[e]={exports:{},id:e,loaded:!1};return n[e].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=n,t.c=o,t.p="",t(0)}([function(n,t,o){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),i=e(r),c="rsInfiniteScroll",u=i["default"].module(c,[]);u.directive("rsInfiniteScroll",["$q","$timeout",function(n,t){return{restrict:"A",transclude:!0,template:"<div ng-transclude></div>",scope:{proxy:"="},controller:["$scope","$element",function(o,e){function r(){var n=1,o=-1,r=u(),l=r.containerHeight,g=r.contentHeight;e.on("scroll",function(){t.cancel(d);var e=u(),r=e.containerHeight,l=e.contentHeight,f=e.scrollPos,g=f>a?n:o;g===n&&f>=.9*(l-r)&&0==p&&i(),g===o&&.1*r>=f&&0==p&&c(),a=f,d=t(s,300)}),l>g&&i().then(function(){t(function(){f(1)})})}function i(){if(o.proxy.loadFollowing){var e=n.defer();return p=1,t(function(){o.proxy.loadFollowing().then(function(){p=0,e.resolve()})}),e.promise}}function c(){if(o.proxy.loadPrevious){var r=n.defer(),i=e.find("div").prop("offsetHeight");return p=1,t(function(){o.proxy.loadPrevious().then(function(){t(function(){var n=e.find("div").prop("offsetHeight");f(n-i),p=0,r.resolve()})})}),r.promise}}function u(){var n=e.prop("offsetHeight"),t=e.find("div").prop("offsetHeight"),o=e[0].scrollTop;return{containerHeight:n,contentHeight:t,scrollPos:o}}function l(){return e[0].getBoundingClientRect()}function f(){var n=arguments.length<=0||void 0===arguments[0]?0:arguments[0];e[0].scrollTop=n}function s(){for(var n=l(),t=n.top,o=n.bottom,e=t,r=o,i=0,c=g.length;c>i;i++){var u=g[i],f=u.getBoundingBox(),s=f.top,d=f.bottom;console.debug("containerTop",e,"containerBottom",r,"top",s,"bottom",d),u.setIsShown(d>=e&&r>=d||r>=s&&s>=e)}}var d,a=0,p=0,g=[];e.ready(r),o.$on("$destroy",function(){e.off("scroll")}),this.addChild=function(n){g.push(n)}}]}}]),u.directive("rsInfiniteScrollItem",function(){return{require:"^rsInfiniteScroll",restrict:"A",scope:{isShown:"="},link:function(n,t,o,e){e.addChild(n),n.getBoundingBox=function(){return t[0].getBoundingClientRect()},n.setIsShown=function(t){n.isShown=t}}}}),t["default"]=c,n.exports=t["default"]},function(n,t){n.exports=angular}]);