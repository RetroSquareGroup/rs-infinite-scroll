var RsInfiniteScroll=function(n){function o(r){if(t[r])return t[r].exports;var e=t[r]={exports:{},id:r,loaded:!1};return n[r].call(e.exports,e,e.exports,o),e.loaded=!0,e.exports}var t={};return o.m=n,o.c=t,o.p="",o(0)}([function(n,o,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(o,"__esModule",{value:!0});var e=t(1),i=r(e),l="rsInfiniteScroll",c=i["default"].module(l,[]);c.directive("rsInfiniteScroll",["$q","$timeout",function(n,o){return{restrict:"A",transclude:!0,template:"<div ng-transclude></div>",scope:{proxy:"="},controller:["$scope","$element",function(t,r){function e(){var n=1,t=-1,e=u(),f=e.containerHeight,x=e.contentHeight;r.on("scroll",function(){var r=v>-1;r&&!g&&(g=!0,c()),o.cancel(p);var e=u(),f=e.containerHeight,a=e.contentHeight,x=e.scrollPos,H=x>v?n:t;H===n&&x>=.9*(a-f)&&0==h&&i(),H===t&&.1*f>=x&&0==h&&l(),v=x,p=o(function(){d(),g&&(s(),g=!1)},300)}),f>x&&i().then(function(){o(function(){a(1)})})}function i(){if(t.proxy.loadFollowing){var r=n.defer();return h=1,o(function(){t.proxy.loadFollowing().then(function(){h=0,r.resolve()})}),r.promise}}function l(){if(t.proxy.loadPrevious){var e=n.defer(),i=r.find("div").prop("offsetHeight");return h=1,o(function(){t.proxy.loadPrevious().then(function(){o(function(){var n=r.find("div").prop("offsetHeight");a(n-i),h=0,e.resolve()})})}),e.promise}}function c(){if(t.proxy.onScrollStartHandler){for(var n=u(),o=n.scrollPos,r=[],e=0,i=x.length;i>e;e++){var l=x[e];l.isVisible&&r.push(l)}t.proxy.onScrollStartHandler({scrollPosition:o,childrenShowing:r})}}function s(){if(t.proxy.onScrollEndHandler){for(var n=u(),o=n.scrollPos,r=[],e=0,i=x.length;i>e;e++){var l=x[e];l.isVisible&&r.push(l)}t.proxy.onScrollEndHandler({scrollPosition:o,childrenShowing:r})}}function u(){var n=r.prop("offsetHeight"),o=r.find("div").prop("offsetHeight"),t=r[0].scrollTop;return{containerHeight:n,contentHeight:o,scrollPos:t}}function f(){return r[0].getBoundingClientRect()}function a(){var n=arguments.length<=0||void 0===arguments[0]?0:arguments[0];r[0].scrollTop=n}function d(){for(var n=f(),o=n.top,t=n.bottom,r=o,e=t,i=0,l=x.length;l>i;i++){var c=x[i],s=c.getBoundingBox(),u=s.top,a=s.bottom,d=a>=r&&e>=a||e>=u&&u>=r;c.isVisible=d}}var p,g=!1,v=-1,h=0,x=[];r.ready(e),t.$on("$destroy",function(){r.off("scroll")}),this.addChild=function(n){var o=u(),t=o.containerHeight,r=o.contentHeight,e=o.scrollPos;x.push(n),r>t&&0===e&&a(1)}}]}}]),c.directive("rsInfiniteScrollItem",function(){return{require:"^rsInfiniteScroll",restrict:"A",scope:{isVisible:"=",itemData:"="},link:function(n,o,t,r){r.addChild(n),n.getBoundingBox=function(){return o[0].getBoundingClientRect()}}}}),o["default"]=l,n.exports=o["default"]},function(n,o){n.exports=angular}]);